@version:<%= @version %>
<% unless (@preinclude.nil? || @preinclude.empty?) -%>
<% @preinclude.each do |file| -%>
@include "<%= file %>"
<% end -%>
<% end -%>

#
# Generated by Chef for <%= node['fqdn'] %>
# Do NOT modify this file by hand, any changes will be overwritten.
#

# syslog_ng configuration file.
#
# This should behave pretty much like the original syslog on RedHat. But
# it could be configured a lot smarter.
#
# See syslog_ng(8) and syslog_ng.conf(5) for more information.
#
# Note: it also sources additional configuration files (*.conf)
#       located in /etc/syslog_ng/conf.d/

<% unless (@options.nil? || @options.empty?) -%>
options {
    <% @options.each do |key, value| -%>
    <%= key %> (<%= value %>);
    <% end -%>
};
<% end -%>

# Sources
<% unless (@source.nil? || @source.empty?) -%>
<% @source.each do |name, config| -%>
source <%= name -%> {
    <% config.each do |driver, parameters| -%>
    <%= source_builder(driver: driver, parameters: parameters) %>
    <% end -%>
};
<% end -%>
<% end -%>

# Destinations
<% unless (@destination.nil? || @destination.empty?) -%>
<% @destination.each do |name, config| -%>
destination <%= name -%> {
    <% config.each do |driver, parameters| -%>
    <%= destination_builder(driver: driver, parameters: parameters) %>
    <% end -%>
};
<% end -%>
<% end -%>

# Filters
<% unless (@filter.nil? || @filter.empty?) -%>
<% @filter.each do |name, config| -%>
filter <%= name %> {
    <%= filter_builder(config) %>;
};
<% end -%>
<% end -%>

# Logs
<% unless (@log.nil? || @log.empty?) -%>
<% @log.each do |name, config| -%>
log {
    <% config.each do |element, values| -%>
    <% values.each do |value| -%>
    <%= element %>(<%= value %>);
    <% end -%>
    <% end -%>
};
<% end -%>
<% end -%>

# Source additional configuration files (.conf extension only)
<% unless @include.nil? || @include.empty? -%>
<% @include.each do |file| -%>
@include "<%= file %>"
<% end -%>
<% end -%>

# vim:ft=syslog_ng:ai:si:ts=4:sw=4:et:
